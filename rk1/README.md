# Поиск по параметрическому запросу
Рекомендательная система выбирает для пользователя подходящую ему породу собак.  
**lab02.json** - файл содержит описание пород собак с их характеристиками.  
**rates.csv** - матрица оценок пользователя, сгенерированна в лр 3.  
**main.py** - код основной программы.    
По сути, все предыдущие ЛР надстраивались одна над другой. Чтобы соединить все 5 лр необходимо к лр 4 добавить коллаборативную фильтрацию.    
Интерфейс приложения:  
![https://sun9-67.userapi.com/impf/VyDkSe4roxaUE58QRSDZIrN6vXftRQQvaPQeDQ/uKIzI8soWbg.jpg?size=997x441&quality=96&proxy=1&sign=1b55f5f7b55c4be1da2fb5923cfef156&type=album]  
Теперь пользователю необходимо ввести свое имя. Его оценки будут сохраняться в файле rates.csv. Остальное аналогично лр 4.   
![https://sun9-12.userapi.com/impf/4SHslLWLT1wwmwTlBtSj-BJxYuv0a9jPmzuGxw/VCD4TKqv5Rk.jpg?size=992x438&quality=96&proxy=1&sign=3ee319003298e99c8218bb451a8e9da2&type=album]  
Теперь вместо "Мне нравится" и "Мне не нравятся" пользователь оценивает рекомендации по пятибальной шкале. При оценке от 3 до 5 порода попадает в массив лайков, при оценке от 1 до 2 - в массив дизлайков. Дальнейшие рекомендации строятся на основе двух алгоритмов: алгоритма из лр 4 (поиск на основе лайков и дизлайков) и алгоритма коллаборативной фильтрациии. Таким образом, для каждой породы получаются два коэффициента корреляции. Вычисляется средний коэффициент. Из-за того, что матрица сгенерирована случайным образом коллаборативная фильтрация немного "портит" рекомендации. Поэтому оценка с помощью 1-ого алгоритма имеет больший вес, чем оценка коллаборативной фильтрации. Оценки коллаборативной фильтрации умножаются на 0.4 (коэффициент подбирался экспериментально).  
![https://sun9-4.userapi.com/impf/4Zc0LskkthI-T5BHXsNcaUCA-RKs66xr8wBObA/OXsDX5t-3ko.jpg?size=989x436&quality=96&proxy=1&sign=38175ced1ea90be71ff469db024e28fa&type=album]  
Пользователь может оценить следующие рекомендации и т. д., пока есть, что предлагать.  
## Выводы
Коэффициент корреляции Пирсона очень хорошо справляется с задачей определения "похожести".  
Качество рекомендаций можно определить следующим образом:  
1. Предложенные породы похожи на эталон характеристиками.  
2. Если пользователь выбирает маленьких собак, то РС не предлагает больших (и наоборот). Однако, если не осталось маленьких собак, то РС предложит средних/больших, но с похожими характеристиками.
3. Если пользователь указал, что собирается держать собаку в квартире, РС не будет предлагать породы, которые для этого не подходят. Однако, если собак для квариры не осталось, РС предложит других, но с похожими карактеристиками.  
  
Эффективность коллаборативной фильтрации трудно оценить на рандомно сгенерированной матрице. Однако, если использовать КФ с реальными данными, то рекомендации могут улучшиться. Например, КФ сможет находить зависимости, которые действительно существуют, но нам они кажутся нелогичными. Не все пользователи любят только маленьких или только больших собак, людям могут нравятся собаки с очень разными характеристиками и тд.